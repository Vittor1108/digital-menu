<article>
  <div class="path">
    <ul>
      <li><i class="fa-solid fa-house"></i>Home/</li>
      <li>Matéria Prima/</li>
      <li>{{ titlePage }}</li>
    </ul>
  </div>
  <div class="snack">
    <app-snack-sucess
      [messageSucess]="messageSucess"
      [title]="titleSucess"
      [events]="eventSubjectSucess.asObservable()"
    ></app-snack-sucess>
    <app-snack-error
      [messageError]="messageError"
      [title]="titleError"
      [events]="eventSubjectError.asObservable()"
    ></app-snack-error>
    <app-snack-atetion
      [messageAtention]="messageAtention"
      [title]="titleAtention"
      [events]="eventSubjectAtention.asObservable()"
    ></app-snack-atetion>
  </div>
  <form class="infoProduct" [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="dataProduct">
      <h1>{{ titlePage }}</h1>
      <div>
        <label for="">Nome da Matéria</label>
        <input type="text" placeholder="Arroz 5Kg" formControlName="name" />
        <p
          class="errorMessage"
          *ngIf="form.get('name')?.errors && form.get('name')?.touched"
        >
          Nome é Obrigatório
        </p>
      </div>
      <div class="doubleInput">
        <div>
          <label for="">Valor da Matéria</label>
          <input
            type="text"
            mask="separator.2"
            [thousandSeparator]="'.'"
            [decimalMarker]="','"
            [dropSpecialCharacters]="true"
            formControlName="price"
            placeholder="R$"
            prefix="R$"
          />
          <p
            class="errorMessage"
            *ngIf="form.get('price')?.errors && form.get('price')?.touched"
          >
            Preço é Obrigatório
          </p>
        </div>
        <div>
          <label for="">Quantidade da Matéria</label>
          <input
            type="text"
            mask="separator.2"
            [thousandSeparator]="'.'"
            [decimalMarker]="','"
            [dropSpecialCharacters]="true"
            formControlName="qtd"
            placeholder="quilos, gramas, litros"
          />
          <p
            class="errorMessage"
            *ngIf="form.get('qtd')?.errors && form.get('qtd')?.touched"
          >
            Quantidade é Obrigatório
          </p>
        </div>
        <div>
          <label for="">Selecione a Medida</label>
          <ng-multiselect-dropdown
            [settings]="dropdownSettings"
            [data]="listMeasure"
            formControlName="measure"
            placeholder="Selecione"
          >
          </ng-multiselect-dropdown>
        </div>
      </div>
      <div class="divInputFile">
        <label for="">Imagem do Produto</label>
        <div>
          <input
            type="file"
            hidden
            (change)="getInfoImage($event)"
            accept="image/png, image/jpeg, image/jpg, image/gif"
          />
          <input
            type="text"
            placeholder="{{ placeHolderInputFile }}"
            disabled
          />
          <button type="button" (click)="addImage()">Selecionar</button>
        </div>
      </div>
    </div>
    <div class="previewProduct">
      <h2>Matéria Prima</h2>
      <div class="slider" *ngIf="filesThumbProduct.length > 0">
        <ul>
          <li
            *ngFor="let img of filesThumbProduct; let i = index"
            [ngClass]="{
              removeImage: i === 0 && filesThumbProduct.length > 1
            }"
          >
            <img src="{{ img }}" alt="" />
          </li>
        </ul>
        <div class="thumb">
          <ul>
            <li *ngFor="let img of filesThumbProduct; let i = index">
              <img
                src="{{ img }}"
                alt=""
                (click)="changeImage(i)"
                [ngClass]="{
                  imageSelected: i === filesThumbProduct.length - 1
                }"
              />
            </li>
          </ul>
        </div>
      </div>
      <div class="noImage" *ngIf="filesThumbProduct.length === 0">
        <img
          src="../../../../assets/images/noImageIcon.png"
          alt="Adicine uma imagem"
        />
      </div>
      <div class="buttons">
        <button type="submit">Salvar</button>
        <button type="button" (click)="removeFiles()">Deletar Imagem</button>
      </div>
    </div>
  </form>
</article>
